<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Gameofhoas</title>
     <style>
	   .rowdiv{
            position: relative;
            display: inline-block;            
            padding: 0px;
        }
		
        .imgdiv{
            position: relative;
		background-color: blue;
            display: inline-block;
            width:82px;
            height: 82px;
            line-height: 82px;
            font-size: 10px;
            padding: 6px;
            text-align: center;
            border: 1px solid blue;
            cursor: pointer;
        }
        
        img{
            width:80px;
            height: 80px;
            padding: 0px;
        }

        .hide{
            padding: 0px;
            visibility: hidden;
        }

        .match, .showimg{
            visibility: visible !important;
        }

    </style>

    <script>
 
	var availableImages=[		
		'https://www.chemistrylearner.com/wp-content/uploads/2018/12/Americium-Symbol-150x150.jpg',
		'https://www.chemistrylearner.com/wp-content/uploads/2018/12/Polonium-Symbol-150x150.jpg',
		'https://www.chemistrylearner.com/wp-content/uploads/2018/10/Aluminum-Symbol-150x150.jpg',
		'https://www.chemistrylearner.com/wp-content/uploads/2018/10/Rutherfordium-Symbol-150x150.jpg',
		'https://www.chemistrylearner.com/wp-content/uploads/2018/10/Silver-Symbol-150x150.jpg',
		'https://www.chemistrylearner.com/wp-content/uploads/2018/10/Hydrogen-Symbol-150x150.jpg',
		'https://www.chemistrylearner.com/wp-content/uploads/2018/10/Sodium-Symbol-150x150.jpg',
		'https://www.chemistrylearner.com/wp-content/uploads/2018/10/Palladium-Symbol-150x150.jpg',
		'https://www.chemistrylearner.com/wp-content/uploads/2018/10/Titanium-Symbol-150x150.jpg',
		'https://www.chemistrylearner.com/wp-content/uploads/2018/10/Lithium-Symbol-150x150.jpg',
		'https://www.chemistrylearner.com/wp-content/uploads/2018/09/Sulfur-Symbol-150x150.jpg',
		'https://www.chemistrylearner.com/wp-content/uploads/2018/09/Copper-Symbol-150x150.jpg',
		'https://www.chemistrylearner.com/wp-content/uploads/2018/09/Phosphorus-Symbol-150x150.jpg',
		'https://www.chemistrylearner.com/wp-content/uploads/2018/09/Nitrogen-Symbol-150x150.jpg',
		'https://www.chemistrylearner.com/wp-content/uploads/2018/09/Mercury-Symbol-1-150x150.jpg',
		'https://www.chemistrylearner.com/wp-content/uploads/2018/09/Calcium-Symbol-150x150.jpg'	
	]

	function start(){
		
		
		var ImagesCopy = [];		
		ImagesCopy = ImagesCopy.concat(availableImages);
		//-- tăng gắp đôi số hình
		ImagesCopy = ImagesCopy.concat(availableImages);
				
		let moves =0;
		// xóa hình hiện tại, và khởi tạo mới
		const maindiv = document.getElementById("boardgame");
		while (maindiv.firstChild) {
			maindiv.removeChild(maindiv.lastChild);
		}
		const scorediv = document.getElementById("score");
		while (scorediv.firstChild) {
		   scorediv.removeChild(scorediv.lastChild);
		}
		
		//tổng số hình
		let TotalImage = ImagesCopy.length;
		
		//	
		var row = document.createElement('div');	
		row.setAttribute('class', 'rowdiv');
		
		for(let j=1; j <= TotalImage; j++){
		
			// tao mới div
			var div = document.createElement('div');
			
			// gán thuộc tính class ="imgdiv"			
			div.setAttribute('class', 'imgdiv');
			
			// tạo tag img 
			var image = document.createElement('img');
			
			//-- sinh số ngẫu nhiên trong khoảng 1 -> ImagesCopy.length
			var ramdom = Math.floor(Math.random() * ImagesCopy.length); 
			
			// lấy 1 link hình ra khỏi mảng ImagesCopy
			let randomImg = ImagesCopy.splice(ramdom, 1);
			
			// gán link hình vào tag <img src= >
			image.setAttribute('src',randomImg);
			
			// gán thuộc tính ẩn cho tag <img src= >
			image.setAttribute('class','hide');
			
			// gắn thêm vào div			
			div.appendChild(image);
			
			// gắn div vào row
			row.appendChild(div);
						
			let rowIndex = j % 8; // 1 dòng 8 hình
			if(rowIndex == 0){
				
				// gắn dòng ( row ) vào boardgame
				document.getElementById('boardgame').append(row);
				
				// tạo dòng mới
				row = document.createElement('div');
				row.setAttribute('class', 'rowdiv');
			}

			// gắn sự kiện click vào tag div
			div.addEventListener('click',function(event){
				moves++;
				let curr = event.currentTarget.children;
				
				// div vừa nhấn
				let imageClicked = curr[0];
				
				// lấy hình có thuộc tính showimg
			    var imageShowing = document.getElementsByClassName('showimg');
				
				let flagMatch = 0;
				if(imageShowing.length >= 1){
					for(let i=0; i < imageShowing.length; i++)
					{
						if(imageShowing[i].src != imageClicked.src){
							// 2 hình không giống nhau 
							// xóa thuộc tính showimg 
							imageShowing[i].classList.remove('showimg');
						}						
						else{
							// gắn thuộc tính match cho imageShowing[i]
							imageShowing[i].classList.add('match');
							
							// gắn thuộc tính match cho imageClicked
							imageClicked.classList.add('match')
							
							// thông báo flagMatch 
							flagMatch = 1;
						}
					}
				}

				if(document.getElementsByClassName('match').length == TotalImage){
					// == TotalImage ==> tất cả hình đã mở					
					
					//alert("You won !!! ")					
					let button = document.createElement('button');
					button.setAttribute('class' , 'btn btn-warning');
					
					let node= document.createTextNode("Bạn đã trở thành phù thủy hóa học quyền năng trong" + moves + " lần thử!");
					
					button.appendChild(node)
					document.getElementById('score').appendChild(button) 
				}

				if(flagMatch == 0){
					// không match
					imageClicked.classList.add('showimg');
				}				
			})
		}
	}

	</script>
   
</head>
<body>
    <div class="container">
         <h1>Gameofhoas</h1>
		<h2>match nguyến tố với số proton tương ứng</h2>
        
        <button class="btn btn-success" onclick="start()">Start game</button><br><br>
        <div id="score"></div>
        <div id="boardgame"></div>
    </div>
    
</body>
</html>
